
{% extends "base.html" %}
{% load staticfiles %}
{% block title %}SignIn{% endblock %}

{% block content %}
<head>
  <script type="text/javascript" src="{% static 'js/jquery.js' %}"></script>
  <script type="text/javascript" src="{% static 'js/jquery-ui.js' %}"></script>

  <link rel="stylesheet" type="text/css" href="{% static '/css/jquery-ui.css' %}">

</head>
<body class="agregar_residencia" style="background-color:LightGrey;">
  <div class="container">
    <div class="row">
      <div class="col-md-4"></div>
      <div class="col-sm-12 col-lg-5">
        <div class="login-panel panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Ingrese sus datos</h3>
          </div>
          <br></br>
          <div class="panel-body">
            <form class="leave-comment" method="POST" action="{% url 'registrar' %}" onsubmit="return validate_passwords_match()">{% csrf_token %}
              <fieldset>

                <div class="form-row">
                  <div class="form-group col-md-6">
                    <input class="form-control" placeholder="Nombre" type="text" name="firstName" required value={{user.usuario.nombre}}
                           >
                  </div>
                  <div class="form-group col-md-6">
                    <input class="form-control" placeholder="Apellido" type="text" name="lastName" required value={{user.usuario.apellido}}
                           >
                  </div>
                </div>
                <div class="form-group">
                  <input class="form-control" placeholder="E-mail" name="email" type="email" required value={{user.usuario.email}}
                         >
                </div>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <input class="form-control" placeholder="DNI" name="dni" type="Number" required value={{user.usuario.dni}} >
                  </div>
                  <div class="form-group col-md-6">
                    <input id="dob" class="form-control" placeholder="Fecha de nacimiento" type="text"
                         name="birthDay" required value={{user.usuario.fecha_nacimiento}} > 
                </div>
                <div class="form-group col-md-6">
                  <input id="id_password" class="form-control" placeholder="Contrase&ntilde;a" name="password"
                         type="password" pattern=".{8,}" required title="Minimo 8 caracteres">
                </div>
                <div class="form-group col-md-6">
                  <input id="id_confirmPassword" class="form-control" placeholder="Confirmar contrase&ntilde;a"
                         name="confirmPassword" type="password" required>
                </div>

                <button type="submit" class="btn btn-lg btn-dark btn-block">Registrarse</button>
              </fieldset>
            </form>
            {% if error %}
              <p style="color:red"> {{ error.mensaje }}</p>
            {% endif %}
            <p style="color:red" id="pwdAlert"></p>
          </div>
        </div>
        <br></br>
		      {% for message in messages %}

            <div id="alerta" class="alert alert-danger">
              <button id="close_alert" class="close" href="#" data-dismiss="alert">×</button>
                {{ message }}

            </div>
          {% endfor %}
      </div>
    </div>
  </div>
</body>
<script type="text/javascript" src="{% static 'css/vendor/sweetalert/sweetalert.min.js' %}"></script>
<script> 
$("#close_alert").click(function (e) { 
  e.preventDefault();
  $("#alerta").hide()
  
});

</script>
    <script>
    $('#id_confirmPassword').on('keyup', function(){
        if($('#id_confirmPassword').val() === $('#id_password').val())
            $('#pwdAlert').hide();
        else
            $('#pwdAlert').show().html('Las contraseñas no coinciden');
    });
    </script>

    
    <script type="text/javascript">
           $('#dob').datepicker({
            onSelect: function(value, ui) {
                var today = new Date(), 
                    age = today.getFullYear() - ui.selectedYear;
                if(age >= 18)
                    $('#age').text("User is 18 years old");
                else
                    $('#age').text("User is 18 not years old");
            },
            maxDate: '+0d',
            changeMonth: true,
            changeYear: true,
            yearRange: '-110:-0'

        });   
    </script>


       {% comment %} $(document).ready(function() {
            var age = "";
            $('#dob').datepicker({
                onSelect: function(value, ui) {
                    var today = new Date();
                    age = today.getFullYear() - ui.selectedYear;
                    $('#age').val(age);
                },
                changeMonth: true,
                changeYear: true
            })
        }) {% endcomment %}
{% endblock %}
