{% extends 'base.html' %}

{% load staticfiles %}

{% block body%}

    <section class="bg-title-page p-t-50 p-b-40 flex-col-c-m" style="background-image: url(http://seniors.kingsporttn.gov/wp-content/uploads/sites/10/2019/05/summer-banner-1000.jpg);">
		<h2 class="l-text2 t-center">
			Residencias en HotSale
		</h2>
	</section>

	

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
 
	<!-- JS -->
	<script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
	
	
	<!-- Content page -->
	{% for message in messages %}
	
						<div class="alert alert-success">
							<a class="close" href="#" data-dismiss="alert">×</a>
	
							{{ message }}
	
						</div>
			{% endfor %}
	<section class="bgwhite p-t-55 p-b-65">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-md-4 col-lg-3 p-b-50">
					<div class="leftbar p-r-20 p-r-0-sm">
						<h4 class="m-text14 p-b-32">
						<style>
						.form-control:valid {
 							 background-color:  	#D3D3D3;
						}
						</style>

								<form method="GET" action="{% url 'filtrar_residencias_hotsale' %}"
								<div class="filter-price p-t-22 p-b-50 bo3">
									<div class="form-group">
								<br>
										Filtrar Por Localidad:
										
										<select class="custom-select custom-select-sm" id="selector" name="localidad">
										<option selected>Seleccione una localidad</option>
										{% for localidad in localidades %}
											<option value="{{localidad}}">{{localidad}}</option>
										{% endfor %}
										</select>
								<br>
								<br>
								<button id="boton_buscar" type="submit" class="flex-c-m size4 bg7 bo-rad-15 hov1 s-text14 trans-0-4">
									Buscar
								</button>
						</h4>

					</div>
				</div>

				<div class="col-sm-6 col-md-8 col-lg-9 p-b-50">
					<!--  -->
					<div class="flex-sb-m flex-w p-b-35">
						<div class="flex-w">
							<br></br>
							
							
						</div>

						<span class="s-text8 p-t-5 p-b-5">
							Showing 1–12 of 16 results
						</span>
					</div>

					<!-- Product -->
					<div id="list" class="row">
						{% if not residencias %} No se encontraron Resultados de Residencias Disponibles{% endif %}
						{% for residencia in residencias %} 
						<div class="col-sm-12 col-md-6 col-lg-4 p-b-50">
							<!-- Block2 -->
							<div class="block2">
								<div class="block2-img wrap-pic-w of-hidden pos-relative block2-label">
									<img src="{{ residencia.imagen}}" alt="IMG-PRODUCT">

									<div class="block2-overlay trans-0-4">
										<a href="#" class="block2-btn-addwishlist hov-pointer trans-0-4">
											<i class="icon-wishlist icon_heart_alt" aria-hidden="true"></i>
											<i class="icon-wishlist icon_heart dis-none" aria-hidden="true"></i>
										</a>

										<div class="block2-btn-addcart w-size1 trans-0-4">
											<!-- Button -->
										<a href="{% url 'hotsale_detail' residencia.auto_id %}" class="flex-c-m size1 bg4 bo-rad-23 hov1 s-text1 trans-0-4">Ver Mas</a>
										</div>
									</div>
								</div>
								<div class="block2-txt p-t-20">
									<h5>
										{{residencia.nombre}}
									</h5>
									<span class= "block2 m-text6 p-r-5">
										Capacidad: {{residencia.capacidad}} personas
									</span>

									<span class= "block2 m-text6 p-r-5">
										Direccion: {{residencia.direccion}}, {{residencia.localidad}}
									</span>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>

					<!-- Pagination -->
					<div class="pagination flex-m flex-w p-t-26">
						<a href="#" class="item-pagination flex-c-m trans-0-4 active-pagination">1</a>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}



{% block jsmas %}
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/jquery/jquery-3.2.1.min.js' %}"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/animsition/js/animsition.min.js' %}"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/bootstrap/js/popper.js' %}"></script>
	<script type="text/javascript" src="{% static 'css/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/select2/select2.min.js' %}"></script>
	<script type="text/javascript">
		$(".selection-1").select2({
			minimumResultsForSearch: 20,
			dropdownParent: $('#dropDownSelect1')
		});

		$(".selection-2").select2({
			minimumResultsForSearch: 20,
			dropdownParent: $('#dropDownSelect2')
		});
	</script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/daterangepicker/moment.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'css/vendor/daterangepicker/daterangepicker.js' %}"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/slick/slick.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/slick-custom.js' %}"></script>
<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/sweetalert/sweetalert.min.js' %}"></script>
	<script type="text/javascript">
		$('.block2-btn-addcart').each(function(){
			var nameProduct = $(this).parent().parent().parent().find('.block2-name').html();
			$(this).on('click', function(){
				swal(nameProduct, "is added to cart !", "success");
			});
		});

		$('.block2-btn-addwishlist').each(function(){
			var nameProduct = $(this).parent().parent().parent().find('.block2-name').html();
			$(this).on('click', function(){
				swal(nameProduct, "is added to wishlist !", "success");
			});
		});
	</script>

<!--===============================================================================================-->
	<script type="text/javascript" src="{% static 'css/vendor/noui/nouislider.min.js' %}"></script>
	<script type="text/javascript">
		/*[ No ui ]
	    ===========================================================*/
	    var filterBar = document.getElementById('filter-bar');

	    noUiSlider.create(filterBar, {
	        start: [ 50, 200 ],
	        connect: true,
	        range: {
	            'min': 50,
	            'max': 200
	        }
	    });

	    var skipValues = [
	    document.getElementById('value-lower'),
	    document.getElementById('value-upper')
	    ];

	    filterBar.noUiSlider.on('update', function( values, handle ) {
	        skipValues[handle].innerHTML = Math.round(values[handle]) ;
	    });
	</script>
<!--===============================================================================================-->
	<script src="{% static 'js/main.js' %}"></script>

	<script>
	$(function() {
		
  		$('#daterange').daterangepicker({
    		"dateLimit": {
                "month": 2
            },
			minDate: moment().add(6, 'M'),
			"locale": {
        		"format": "DD-MM-YYYY",
				"separator": " Hasta ",
				"applyLabel": "Aceptar",
				"cancelLabel": "Cancelar",
				"fromLabel": "From",
				"toLabel": "To",
				"customRangeLabel": "Custom",
				"daysOfWeek": [
					"Do",
					"Lu",
					"Ma",
					"Mie",
					"Ju",
					"Vi",
					"Sa"
				],
				"monthNames": [
					"Enero",
					"Febrero",
					"Marzo",
					"Abril",
					"Mayo",
					"Junio",
					"Julio",
					"Agosto",
					"Septiembre",
					"Octubre",
					"Noviembre",
					"Diciembre"
				],
				"firstDay": 1
				
			}
			
  		}, function(start, end, label) {
    		console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
  		});
		$('#daterange').val($('#daterange').attr("placeholder"));
	});
	</script>

<script>

{% comment %} function imprimir_residencias(response){
	("#list").html(" {% for res in response %} <h2>res.localidad</h2> {% endfor %}")
} {% endcomment %}

</script>

{% comment %} <script>
function filtrar_residencias(){
			$.ajax({
			type: "GET",
			url: "{% url 'filtrar_residencias' %}",
			headers: {
				'X-CSRFToken': '{{ csrf_token }}'
			},
			data: {
					'daterange': $("#daterange").val(), 
					'localidad': $("#localidad").val()
				},
			dataType: "json",
			success: function(response) {
				console.log(response)
				alert(response)
				$("#residencias").replaceWith(response);
         	},
          	error: function(response) {
            	alert("no se encontraron");
          }
		});
}


</script> {% endcomment %}

</body>
</html>

{% endblock %}